
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mini Car Racer</title>
  <style>
    body { background:#222; color:#eee; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
    canvas { background:#444; border:6px solid #111; box-shadow:0 6px 20px rgba(0,0,0,.7); }
    #info { position:fixed; top:10px; left:10px; color:#fff; font-family:sans-serif; }
  </style>
</head>
<body>
  <div id="info">Left/Right arrows to move â€¢ Score: <span id="score">0</span></div>
  <canvas id="c" width="400" height="600"></canvas>

  <script>
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');

    const car = { w:40, h:70, x: (canvas.width-40)/2, y: canvas.height-90, speed:6 };
    let obstacles = [];
    let frame = 0;
    let score = 0;
    let left=false, right=false;
    let gameOver = false;

    document.addEventListener('keydown', e => { if(e.key === 'ArrowLeft') left=true; if(e.key === 'ArrowRight') right=true; });
    document.addEventListener('keyup', e => { if(e.key === 'ArrowLeft') left=false; if(e.key === 'ArrowRight') right=false; });
    canvas.addEventListener('click', () => { if(gameOver){ reset(); }});

    function reset(){
      obstacles = []; frame = 0; score = 0; gameOver = false;
      car.x = (canvas.width - car.w)/2;
    }

    function spawnObstacle(){
      const w = 60 + Math.random()*80;
      const x = Math.random()*(canvas.width - w);
      obstacles.push({x, y: -100, w, h: 30 + Math.random()*30, speed: 3 + Math.random()*2});
    }

    function update(){
      if(gameOver) return;
      frame++;
      if(frame % 90 === 0) spawnObstacle();
      if(left) car.x -= car.speed;
      if(right) car.x += car.speed;
      car.x = Math.max(10, Math.min(canvas.width - car.w - 10, car.x));

      for(let ob of obstacles){ ob.y += ob.speed; }
      obstacles = obstacles.filter(o => o.y < canvas.height + 50);

      for(let o of obstacles){
        if(rectIntersect(car.x, car.y, car.w, car.h, o.x, o.y, o.w, o.h)){
          gameOver = true;
        }
      }

      score += 0.02;
      scoreEl.textContent = Math.floor(score);
    }

    function rectIntersect(x1,y1,w1,h1,x2,y2,w2,h2){
      return !(x2 > x1 + w1 || x2 + w2 < x1 || y2 > y1 + h1 || y2 + h2 < y1);
    }

    function draw(){
      ctx.fillStyle = '#2b2b2b';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      ctx.fillStyle = '#333';
      ctx.fillRect(40,0,canvas.width-80,canvas.height);
      for(let i=0;i<20;i++){
        ctx.fillStyle = (i%2===0)?'#bbb':'#ddd';
        ctx.fillRect(canvas.width/2 -5, i*60 + (frame*3)%60, 10, 40);
      }

      ctx.fillStyle = '#e74c3c';
      roundRect(ctx, car.x, car.y, car.w, car.h, 6);
      ctx.fillStyle = 'rgba(255,255,255,0.6)';
      ctx.fillRect(car.x+8, car.y+10, car.w-16, 18);

      for(let o of obstacles){
        ctx.fillStyle = '#1abc9c';
        roundRect(ctx, o.x, o.y, o.w, o.h, 6);
      }

      if(gameOver){
        ctx.fillStyle = 'rgba(0,0,0,0.6)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#fff';
        ctx.font = '24px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('GAME OVER', canvas.width/2, canvas.height/2 - 20);
        ctx.font = '16px sans-serif';
        ctx.fillText('Click canvas to restart', canvas.width/2, canvas.height/2 + 10);
      }
    }

    function roundRect(ctx, x, y, w, h, r){
      ctx.beginPath();
      ctx.moveTo(x + r, y);
      ctx.arcTo(x + w, y, x + w, y + h, r);
      ctx.arcTo(x + w, y + h, x, y + h, r);
      ctx.arcTo(x, y + h, x, y, r);
      ctx.arcTo(x, y, x + w, y, r);
      ctx.closePath();
      ctx.fill();
    }

    function loop(){
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
