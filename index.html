<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Car Racing ‚Äî Score & Speed</title>
  <style>
    :root {
      --game-w: 400px;
      --game-h: 600px;
    }
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(#111, #333);
      font-family: Arial, sans-serif;
      color: #fff;
    }
    #gameWrapper {
      width: var(--game-w);
      text-align: center;
    }
    #gameArea {
      width: var(--game-w);
      height: var(--game-h);
      background: #222;
      margin: 0 auto;
      position: relative;
      border-left: 4px dashed rgba(255,255,255,0.12);
      border-right: 4px dashed rgba(255,255,255,0.12);
      overflow: hidden;
    }
    #hud {
      position: absolute;
      top: 8px;
      left: 8px;
      z-index: 30;
      font-weight: bold;
      text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    }
    #hud .score { display:block; font-size:18px; }
    #hud .speed { display:block; font-size:13px; opacity:0.9; margin-top:4px;}
    #controls {
      margin-top: 12px;
    }

    #car {
      width: 50px;
      position: absolute;
      left: 175px;
      bottom: 20px;
      z-index: 20;
      transition: left 0s; /* movement via script */
      user-select: none;
    }

    /* Start overlay */
    #overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(0deg, rgba(0,0,0,0.65), rgba(0,0,0,0.3));
      z-index: 40;
      flex-direction: column;
      gap: 12px;
    }
    #overlay h1 { margin: 0; font-size: 24px; }
    .btn {
      background: #ff4d4f;
      border: none;
      color: #fff;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 18px rgba(0,0,0,0.5);
    }
    .btn:active { transform: translateY(1px); }
    #restartBtn { background:#2ecc71; }

    /* small help text at bottom of game area */
    #help {
      position: absolute;
      bottom: 6px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 25;
      font-size: 12px;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div id="gameWrapper">
    <div id="gameArea">
      <div id="hud">
        <div class="score">Score: <span id="scoreVal">0</span></div>
        <div class="speed">Car Speed: <span id="speedVal">0</span></div>
      </div>

      <img id="car" src="car.png" alt="car">

      <div id="help">Use ‚Üê ‚Üí arrows to move ‚Ä¢ Speed increases over time</div>

      <div id="overlay">
        <h1>üöó Car Racing</h1>
        <div>Survive as long as possible. Score increases over time.</div>
        <button id="startBtn" class="btn">Start Race</button>
      </div>
    </div>

    <div id="controls">
      <button id="restartBtn" class="btn" style="display:none">Restart</button>
    </div>
  </div>

<script>
  // Elements
  const overlay = document.getElementById('overlay');
  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');
  const scoreEl = document.getElementById('scoreVal');
  const speedEl = document.getElementById('speedVal');
  const car = document.getElementById('car');
  const gameArea = document.getElementById('gameArea');

  // Game state
  let gameStarted = false;
  let lastTime = null;
  let score = 0;            // seconds survived * factor
  let baseSpeed = 8;       // initial movement speed (px per frame when holding)
  let speedMultiplier = 1; // increases over time
  let maxMultiplier = 3;   // cap of speed increase
  let multiplierIncreaseRate = 0.02; // how fast multiplier increases per second
  let carX = 175;
  const minX = 10;
  const maxX = 400 - 50 - 10; // game width - car width - margin

  let leftPressed = false;
  let rightPressed = false;

  // Update displayed values
  function updateHUD(){
    scoreEl.textContent = Math.floor(score);
    // show effective "movement speed" as integer (for player clarity)
    const effectiveSpeed = Math.round(baseSpeed * speedMultiplier);
    speedEl.textContent = effectiveSpeed;
  }

  // Keyboard handlers
  document.addEventListener('keydown', (e) => {
    if (!gameStarted) return;
    if (e.key === 'ArrowLeft') leftPressed = true;
    if (e.key === 'ArrowRight') rightPressed = true;
  });
  document.addEventListener('keyup', (e) => {
    if (!gameStarted) return;
    if (e.key === 'ArrowLeft') leftPressed = false;
    if (e.key === 'ArrowRight') rightPressed = false;
  });

  // For mobile: simple touch zones (left/right halves)
  gameArea.addEventListener('touchstart', function(e){
    if (!gameStarted) return;
    const x = e.touches[0].clientX - gameArea.getBoundingClientRect().left;
    if (x < (gameArea.clientWidth/2)) leftPressed = true; else rightPressed = true;
  }, {passive:true});
  gameArea.addEventListener('touchend', function(){ leftPressed=false; rightPressed=false; });

  // Start & Restart
  startBtn.addEventListener('click', startGame);
  restartBtn.addEventListener('click', restartGame);

  function startGame(){
    overlay.style.display = 'none';
    restartBtn.style.display = 'inline-block';
    gameStarted = true;
    lastTime = null;
    requestAnimationFrame(gameLoop);
  }

  function restartGame(){
    // Reset state
    gameStarted = false;
    overlay.style.display = 'flex';
    restartBtn.style.display = 'none';
    score = 0;
    baseSpeed = 8;
    speedMultiplier = 1;
    updateHUD();
    carX = 175;
    car.style.left = carX + 'px';
    leftPressed = rightPressed = false;
  }

  // Main loop
  function gameLoop(timestamp){
    if (!lastTime) lastTime = timestamp;
    const dt = (timestamp - lastTime) / 1000; // seconds
    lastTime = timestamp;

    // Update score (increase by time survived)
    if (gameStarted){
      score += dt * 10; // 10 points per second (adjustable)
      // increase difficulty (speed multiplier)
      speedMultiplier += multiplierIncreaseRate * dt;
      if (speedMultiplier > maxMultiplier) speedMultiplier = maxMultiplier;

      // Movement
      const movement = baseSpeed * speedMultiplier * (dt * 60); 
      // (dt*60) normalizes to ~per-frame feel across fps
      if (leftPressed) carX -= movement;
      if (rightPressed) carX += movement;
      carX = Math.max(minX, Math.min(maxX, carX));
      car.style.left = Math.round(carX) + 'px';

      updateHUD();
    }

    // continue loop
    if (gameStarted) requestAnimationFrame(gameLoop);
  }

  // initialize HUD
  updateHUD();

  // small UX: pressing Enter will start if overlay visible
  document.addEventListener('keydown', (e)=>{
    if (!gameStarted && (e.key === 'Enter')) startGame();
  });
</script>
</body>
</html>
